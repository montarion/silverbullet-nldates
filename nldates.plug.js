var Lr=Object.create;var ct=Object.defineProperty;var Hr=Object.getOwnPropertyDescriptor;var jr=Object.getOwnPropertyNames;var zr=Object.getPrototypeOf,Vr=Object.prototype.hasOwnProperty;var It=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Ke=(r,e)=>{for(var t in e)ct(r,t,{get:e[t],enumerable:!0})},Kr=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of jr(e))!Vr.call(r,i)&&i!==t&&ct(r,i,{get:()=>e[i],enumerable:!(n=Hr(e,i))||n.enumerable});return r};var G=(r,e,t)=>(t=r!=null?Lr(zr(r)):{},Kr(e||!r||!r.__esModule?ct(t,"default",{value:r,enumerable:!0}):t,r));var Gt=It((yt,Tt)=>{(function(r,e){typeof yt=="object"&&typeof Tt<"u"?Tt.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_quarterOfYear=e()})(yt,function(){"use strict";var r="month",e="quarter";return function(t,n){var i=n.prototype;i.quarter=function(o){return this.$utils().u(o)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(o-1))};var s=i.add;i.add=function(o,c){return o=Number(o),this.$utils().p(c)===e?this.add(3*o,r):s.bind(this)(o,c)};var a=i.startOf;i.startOf=function(o,c){var y=this.$utils(),E=!!y.u(c)||c;if(y.p(o)===e){var N=this.quarter()-1;return E?this.month(3*N).startOf(r).startOf("day"):this.month(3*N+2).endOf(r).endOf("day")}return a.bind(this)(o,c)}}})});var L=It((xt,Pt)=>{(function(r,e){typeof xt=="object"&&typeof Pt<"u"?Pt.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis<"u"?globalThis:r||self).dayjs=e()})(xt,function(){"use strict";var r=1e3,e=6e4,t=36e5,n="millisecond",i="second",s="minute",a="hour",o="day",c="week",y="month",E="quarter",N="year",W="date",Ut="Invalid Date",Fr=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Yr=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Br={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(p){var l=["th","st","nd","rd"],f=p%100;return"["+p+(l[(f-20)%10]||l[f]||l[0])+"]"}},at=function(p,l,f){var m=String(p);return!m||m.length>=l?p:""+Array(l+1-m.length).join(f)+p},Gr={s:at,z:function(p){var l=-p.utcOffset(),f=Math.abs(l),m=Math.floor(f/60),d=f%60;return(l<=0?"+":"-")+at(m,2,"0")+":"+at(d,2,"0")},m:function p(l,f){if(l.date()<f.date())return-p(f,l);var m=12*(f.year()-l.year())+(f.month()-l.month()),d=l.clone().add(m,y),h=f-d<0,g=l.clone().add(m+(h?-1:1),y);return+(-(m+(f-d)/(h?d-g:g-d))||0)},a:function(p){return p<0?Math.ceil(p)||0:Math.floor(p)},p:function(p){return{M:y,y:N,w:c,d:o,D:W,h:a,m:s,s:i,ms:n,Q:E}[p]||String(p||"").toLowerCase().replace(/s$/,"")},u:function(p){return p===void 0}},me="en",Z={};Z[me]=Br;var vt="$isDayjsObject",ut=function(p){return p instanceof ze||!(!p||!p[vt])},je=function p(l,f,m){var d;if(!l)return me;if(typeof l=="string"){var h=l.toLowerCase();Z[h]&&(d=h),f&&(Z[h]=f,d=h);var g=l.split("-");if(!d&&g.length>1)return p(g[0])}else{var A=l.name;Z[A]=l,d=A}return!m&&d&&(me=d),d||!m&&me},R=function(p,l){if(ut(p))return p.clone();var f=typeof l=="object"?l:{};return f.date=p,f.args=arguments,new ze(f)},w=Gr;w.l=je,w.i=ut,w.w=function(p,l){return R(p,{locale:l.$L,utc:l.$u,x:l.$x,$offset:l.$offset})};var ze=function(){function p(f){this.$L=je(f.locale,null,!0),this.parse(f),this.$x=this.$x||f.x||{},this[vt]=!0}var l=p.prototype;return l.parse=function(f){this.$d=function(m){var d=m.date,h=m.utc;if(d===null)return new Date(NaN);if(w.u(d))return new Date;if(d instanceof Date)return new Date(d);if(typeof d=="string"&&!/Z$/i.test(d)){var g=d.match(Fr);if(g){var A=g[2]-1||0,M=(g[7]||"0").substring(0,3);return h?new Date(Date.UTC(g[1],A,g[3]||1,g[4]||0,g[5]||0,g[6]||0,M)):new Date(g[1],A,g[3]||1,g[4]||0,g[5]||0,g[6]||0,M)}}return new Date(d)}(f),this.init()},l.init=function(){var f=this.$d;this.$y=f.getFullYear(),this.$M=f.getMonth(),this.$D=f.getDate(),this.$W=f.getDay(),this.$H=f.getHours(),this.$m=f.getMinutes(),this.$s=f.getSeconds(),this.$ms=f.getMilliseconds()},l.$utils=function(){return w},l.isValid=function(){return this.$d.toString()!==Ut},l.isSame=function(f,m){var d=R(f);return this.startOf(m)<=d&&d<=this.endOf(m)},l.isAfter=function(f,m){return R(f)<this.startOf(m)},l.isBefore=function(f,m){return this.endOf(m)<R(f)},l.$g=function(f,m,d){return w.u(f)?this[m]:this.set(d,f)},l.unix=function(){return Math.floor(this.valueOf()/1e3)},l.valueOf=function(){return this.$d.getTime()},l.startOf=function(f,m){var d=this,h=!!w.u(m)||m,g=w.p(f),A=function(X,b){var B=w.w(d.$u?Date.UTC(d.$y,b,X):new Date(d.$y,b,X),d);return h?B:B.endOf(o)},M=function(X,b){return w.w(d.toDate()[X].apply(d.toDate("s"),(h?[0,0,0,0]:[23,59,59,999]).slice(b)),d)},O=this.$W,C=this.$M,U=this.$D,te="set"+(this.$u?"UTC":"");switch(g){case N:return h?A(1,0):A(31,11);case y:return h?A(1,C):A(0,C+1);case c:var Q=this.$locale().weekStart||0,pe=(O<Q?O+7:O)-Q;return A(h?U-pe:U+(6-pe),C);case o:case W:return M(te+"Hours",0);case a:return M(te+"Minutes",1);case s:return M(te+"Seconds",2);case i:return M(te+"Milliseconds",3);default:return this.clone()}},l.endOf=function(f){return this.startOf(f,!1)},l.$set=function(f,m){var d,h=w.p(f),g="set"+(this.$u?"UTC":""),A=(d={},d[o]=g+"Date",d[W]=g+"Date",d[y]=g+"Month",d[N]=g+"FullYear",d[a]=g+"Hours",d[s]=g+"Minutes",d[i]=g+"Seconds",d[n]=g+"Milliseconds",d)[h],M=h===o?this.$D+(m-this.$W):m;if(h===y||h===N){var O=this.clone().set(W,1);O.$d[A](M),O.init(),this.$d=O.set(W,Math.min(this.$D,O.daysInMonth())).$d}else A&&this.$d[A](M);return this.init(),this},l.set=function(f,m){return this.clone().$set(f,m)},l.get=function(f){return this[w.p(f)]()},l.add=function(f,m){var d,h=this;f=Number(f);var g=w.p(m),A=function(C){var U=R(h);return w.w(U.date(U.date()+Math.round(C*f)),h)};if(g===y)return this.set(y,this.$M+f);if(g===N)return this.set(N,this.$y+f);if(g===o)return A(1);if(g===c)return A(7);var M=(d={},d[s]=e,d[a]=t,d[i]=r,d)[g]||1,O=this.$d.getTime()+f*M;return w.w(O,this)},l.subtract=function(f,m){return this.add(-1*f,m)},l.format=function(f){var m=this,d=this.$locale();if(!this.isValid())return d.invalidDate||Ut;var h=f||"YYYY-MM-DDTHH:mm:ssZ",g=w.z(this),A=this.$H,M=this.$m,O=this.$M,C=d.weekdays,U=d.months,te=d.meridiem,Q=function(b,B,he,Ve){return b&&(b[B]||b(m,h))||he[B].slice(0,Ve)},pe=function(b){return w.s(A%12||12,b,"0")},X=te||function(b,B,he){var Ve=b<12?"AM":"PM";return he?Ve.toLowerCase():Ve};return h.replace(Yr,function(b,B){return B||function(he){switch(he){case"YY":return String(m.$y).slice(-2);case"YYYY":return w.s(m.$y,4,"0");case"M":return O+1;case"MM":return w.s(O+1,2,"0");case"MMM":return Q(d.monthsShort,O,U,3);case"MMMM":return Q(U,O);case"D":return m.$D;case"DD":return w.s(m.$D,2,"0");case"d":return String(m.$W);case"dd":return Q(d.weekdaysMin,m.$W,C,2);case"ddd":return Q(d.weekdaysShort,m.$W,C,3);case"dddd":return C[m.$W];case"H":return String(A);case"HH":return w.s(A,2,"0");case"h":return pe(1);case"hh":return pe(2);case"a":return X(A,M,!0);case"A":return X(A,M,!1);case"m":return String(M);case"mm":return w.s(M,2,"0");case"s":return String(m.$s);case"ss":return w.s(m.$s,2,"0");case"SSS":return w.s(m.$ms,3,"0");case"Z":return g}return null}(b)||g.replace(":","")})},l.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},l.diff=function(f,m,d){var h,g=this,A=w.p(m),M=R(f),O=(M.utcOffset()-this.utcOffset())*e,C=this-M,U=function(){return w.m(g,M)};switch(A){case N:h=U()/12;break;case y:h=U();break;case E:h=U()/3;break;case c:h=(C-O)/6048e5;break;case o:h=(C-O)/864e5;break;case a:h=C/t;break;case s:h=C/e;break;case i:h=C/r;break;default:h=C}return d?h:w.a(h)},l.daysInMonth=function(){return this.endOf(y).$D},l.$locale=function(){return Z[this.$L]},l.locale=function(f,m){if(!f)return this.$L;var d=this.clone(),h=je(f,m,!0);return h&&(d.$L=h),d},l.clone=function(){return w.w(this.$d,this)},l.toDate=function(){return new Date(this.valueOf())},l.toJSON=function(){return this.isValid()?this.toISOString():null},l.toISOString=function(){return this.$d.toISOString()},l.toString=function(){return this.$d.toUTCString()},p}(),_t=ze.prototype;return R.prototype=_t,[["$ms",n],["$s",i],["$m",s],["$H",a],["$W",o],["$M",y],["$y",N],["$D",W]].forEach(function(p){_t[p[1]]=function(l){return this.$g(l,p[0],p[1])}}),R.extend=function(p,l){return p.$i||(p(l,ze,R),p.$i=!0),R},R.locale=je,R.isDayjs=ut,R.unix=function(p){return R(1e3*p)},R.en=Z[me],R.Ls=Z,R.p={},R})});var lt=typeof window>"u"&&typeof globalThis.WebSocketPair>"u";typeof Deno>"u"&&(self.Deno={args:[],build:{arch:"x86_64"},env:{get(){}}});var dt=new Map,ft=0;function qe(r){self.postMessage(r)}lt&&(globalThis.syscall=async(r,...e)=>await new Promise((t,n)=>{ft++,dt.set(ft,{resolve:t,reject:n}),qe({type:"sys",id:ft,name:r,args:e})}));function kt(r,e){lt&&(self.addEventListener("message",t=>{(async()=>{let n=t.data;switch(n.type){case"inv":{let i=r[n.name];if(!i)throw new Error(`Function not loaded: ${n.name}`);try{let s=await Promise.resolve(i(...n.args||[]));qe({type:"invr",id:n.id,result:s})}catch(s){console.error("An exception was thrown as a result of invoking function",n.name,"error:",s.message),qe({type:"invr",id:n.id,error:s.message})}}break;case"sysr":{let i=n.id,s=dt.get(i);if(!s)throw Error("Invalid request id");dt.delete(i),n.error?s.reject(new Error(n.error)):s.resolve(n.result)}break}})().catch(console.error)}),qe({type:"manifest",manifest:e}))}function qr(r){let e=atob(r),t=e.length,n=new Uint8Array(t);for(let i=0;i<t;i++)n[i]=e.charCodeAt(i);return n}function Wt(r){typeof r=="string"&&(r=new TextEncoder().encode(r));let e="",t=r.byteLength;for(let n=0;n<t;n++)e+=String.fromCharCode(r[n]);return btoa(e)}async function Zr(r,e){if(typeof r!="string"){let t=new Uint8Array(await r.arrayBuffer()),n=t.length>0?Wt(t):void 0;e={method:r.method,headers:Object.fromEntries(r.headers.entries()),base64Body:n},r=r.url}return syscall("sandboxFetch.fetch",r,e)}globalThis.nativeFetch=globalThis.fetch;function Qr(){globalThis.fetch=async function(r,e){let t=e&&e.body?Wt(new Uint8Array(await new Response(e.body).arrayBuffer())):void 0,n=await Zr(r,e&&{method:e.method,headers:e.headers,base64Body:t});return new Response(n.base64Body?qr(n.base64Body):null,{status:n.status,headers:n.headers})}}lt&&Qr();function mt(r,e){if(e(r))return[r];let t=[];if(r.children)for(let n of r.children)t=[...t,...mt(n,e)];return t}function pt(r,e){return mt(r,t=>t.type===e)[0]}function Ft(r,e){mt(r,e)}var Ze={};Ke(Ze,{confirm:()=>On,copyToClipboard:()=>kn,dispatch:()=>Sn,downloadFile:()=>hn,filterBox:()=>Tn,flashNotification:()=>yn,fold:()=>bn,foldAll:()=>vn,getCurrentPage:()=>Xr,getCursor:()=>rn,getSelection:()=>nn,getText:()=>en,getUiOption:()=>Nn,goHistory:()=>pn,hidePanel:()=>Pn,insertAtCursor:()=>Mn,insertAtPos:()=>wn,moveCursor:()=>En,navigate:()=>an,openCommandPalette:()=>cn,openPageNavigator:()=>un,openSearchPanel:()=>In,openUrl:()=>mn,prompt:()=>Rn,reloadPage:()=>fn,reloadSettingsAndCommands:()=>ln,reloadUI:()=>dn,replaceRange:()=>An,save:()=>on,setPage:()=>Jr,setSelection:()=>sn,setText:()=>tn,setUiOption:()=>Dn,showPanel:()=>xn,toggleFold:()=>Un,unfold:()=>$n,unfoldAll:()=>_n,uploadFile:()=>gn,vimEx:()=>Cn});typeof self>"u"&&(self={syscall:()=>{throw new Error("Not implemented here")}});var u=globalThis.syscall;function Xr(){return u("editor.getCurrentPage")}function Jr(r){return u("editor.setPage",r)}function en(){return u("editor.getText")}function tn(r){return u("editor.setText",r)}function rn(){return u("editor.getCursor")}function nn(){return u("editor.getSelection")}function sn(r,e){return u("editor.setSelection",r,e)}function on(){return u("editor.save")}function an(r,e=!1,t=!1){return u("editor.navigate",r,e,t)}function un(r="page"){return u("editor.openPageNavigator",r)}function cn(){return u("editor.openCommandPalette")}function fn(){return u("editor.reloadPage")}function dn(){return u("editor.reloadUI")}function ln(){return u("editor.reloadSettingsAndCommands")}function mn(r,e=!1){return u("editor.openUrl",r,e)}function pn(r){return u("editor.goHistory",r)}function hn(r,e){return u("editor.downloadFile",r,e)}function gn(r,e){return u("editor.uploadFile",r,e)}function yn(r,e="info"){return u("editor.flashNotification",r,e)}function Tn(r,e,t="",n=""){return u("editor.filterBox",r,e,t,n)}function xn(r,e,t,n=""){return u("editor.showPanel",r,e,t,n)}function Pn(r){return u("editor.hidePanel",r)}function wn(r,e){return u("editor.insertAtPos",r,e)}function An(r,e,t){return u("editor.replaceRange",r,e,t)}function En(r,e=!1){return u("editor.moveCursor",r,e)}function Mn(r){return u("editor.insertAtCursor",r)}function Sn(r){return u("editor.dispatch",r)}function Rn(r,e=""){return u("editor.prompt",r,e)}function On(r){return u("editor.confirm",r)}function Nn(r){return u("editor.getUiOption",r)}function Dn(r,e){return u("editor.setUiOption",r,e)}function Cn(r){return u("editor.vimEx",r)}function bn(){return u("editor.fold")}function $n(){return u("editor.unfold")}function Un(){return u("editor.toggleFold")}function vn(){return u("editor.foldAll")}function _n(){return u("editor.unfoldAll")}function In(){return u("editor.openSearchPanel")}function kn(r){return u("editor.copyToClipboard",r)}var Qe={};Ke(Qe,{parseMarkdown:()=>Wn});function Wn(r){return u("markdown.parseMarkdown",r)}var re={};Ke(re,{deleteAttachment:()=>qn,deleteFile:()=>ei,deletePage:()=>Ln,getAttachmentMeta:()=>zn,getFileMeta:()=>Xn,getPageMeta:()=>Yn,listAttachments:()=>jn,listFiles:()=>Zn,listPages:()=>Fn,listPlugs:()=>Hn,readAttachment:()=>Vn,readFile:()=>Qn,readPage:()=>Bn,writeAttachment:()=>Kn,writeFile:()=>Jn,writePage:()=>Gn});function Fn(r=!1){return u("space.listPages",r)}function Yn(r){return u("space.getPageMeta",r)}function Bn(r){return u("space.readPage",r)}function Gn(r,e){return u("space.writePage",r,e)}function Ln(r){return u("space.deletePage",r)}function Hn(){return u("space.listPlugs")}function jn(){return u("space.listAttachments")}function zn(r){return u("space.getAttachmentMeta",r)}function Vn(r){return u("space.readAttachment",r)}function Kn(r,e){return u("space.writeAttachment",r,e)}function qn(r){return u("space.deleteAttachment",r)}function Zn(){return u("space.listFiles")}function Qn(r){return u("space.readFile",r)}function Xn(r){return u("space.getFileMeta",r)}function Jn(r,e){return u("space.writeFile",r,e)}function ei(r){return u("space.deleteFile",r)}var ne={};Ke(ne,{parse:()=>di,stringify:()=>li});function di(r){return u("yaml.parse",r)}function li(r){return u("yaml.stringify",r)}async function hi(r,e){let t=await re.readPage(r),n=await Qe.parseMarkdown(t),i;return Ft(n,s=>{if(s.type!=="FencedCode")return!1;let a=pt(s,"CodeInfo");if(e&&!a||e&&!e.includes(a.children[0].text))return!1;let o=pt(s,"CodeText");return o?(i=o.children[0].text,!0):!1}),i}async function ht(r,e=["yaml"]){let t=await hi(r,e);if(t!==void 0)try{return ne.parse(t)}catch(n){throw console.error("YAML Page parser error",n),new Error(`YAML Error: ${n.message}`)}}var gt="SETTINGS";async function Yt(r){try{let e=await ht(gt,["yaml"])||{},t={};for(let[n,i]of Object.entries(r))n in e?t[n]=e[n]:t[n]=i;return t}catch(e){if(e.message==="Not found")return r;throw e}}async function Bt(r){let e={};try{e=await ht(gt,["yaml"])||{}}catch{await Ze.flashNotification("Creating a new SETTINGS page...","info")}let t={...e,...r},n=`This page contains settings for configuring SilverBullet and its Plugs.
Any changes outside of the yaml block will be overwritten.
\`\`\`yaml
${await ne.stringify(t)}
\`\`\``;await re.writePage(gt,n)}var jt=G(Gt()),ge=G(L());var T;(function(r){r[r.AM=0]="AM",r[r.PM=1]="PM"})(T||(T={}));var S;(function(r){r[r.SUNDAY=0]="SUNDAY",r[r.MONDAY=1]="MONDAY",r[r.TUESDAY=2]="TUESDAY",r[r.WEDNESDAY=3]="WEDNESDAY",r[r.THURSDAY=4]="THURSDAY",r[r.FRIDAY=5]="FRIDAY",r[r.SATURDAY=6]="SATURDAY"})(S||(S={}));var $;(function(r){r[r.JANUARY=1]="JANUARY",r[r.FEBRUARY=2]="FEBRUARY",r[r.MARCH=3]="MARCH",r[r.APRIL=4]="APRIL",r[r.MAY=5]="MAY",r[r.JUNE=6]="JUNE",r[r.JULY=7]="JULY",r[r.AUGUST=8]="AUGUST",r[r.SEPTEMBER=9]="SEPTEMBER",r[r.OCTOBER=10]="OCTOBER",r[r.NOVEMBER=11]="NOVEMBER",r[r.DECEMBER=12]="DECEMBER"})($||($={}));function Lt(r,e){e=e.add(1,"day"),J(r,e),ie(r,e)}function k(r,e){r.assign("day",e.date()),r.assign("month",e.month()+1),r.assign("year",e.year())}function Xe(r,e){r.assign("hour",e.hour()),r.assign("minute",e.minute()),r.assign("second",e.second()),r.assign("millisecond",e.millisecond()),r.get("hour")<12?r.assign("meridiem",T.AM):r.assign("meridiem",T.PM)}function J(r,e){r.imply("day",e.date()),r.imply("month",e.month()+1),r.imply("year",e.year())}function ie(r,e){r.imply("hour",e.hour()),r.imply("minute",e.minute()),r.imply("second",e.second()),r.imply("millisecond",e.millisecond())}var wt=G(L());var gi={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:{timezoneOffsetDuringDst:2*60,timezoneOffsetNonDst:60,dstStart:r=>Ht(r,$.MARCH,S.SUNDAY,2),dstEnd:r=>Ht(r,$.OCTOBER,S.SUNDAY,3)},CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CT:{timezoneOffsetDuringDst:-5*60,timezoneOffsetNonDst:-6*60,dstStart:r=>H(r,$.MARCH,S.SUNDAY,2,2),dstEnd:r=>H(r,$.NOVEMBER,S.SUNDAY,1,2)},CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:{timezoneOffsetDuringDst:-4*60,timezoneOffsetNonDst:-5*60,dstStart:r=>H(r,$.MARCH,S.SUNDAY,2,2),dstEnd:r=>H(r,$.NOVEMBER,S.SUNDAY,1,2)},FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MT:{timezoneOffsetDuringDst:-6*60,timezoneOffsetNonDst:-7*60,dstStart:r=>H(r,$.MARCH,S.SUNDAY,2,2),dstEnd:r=>H(r,$.NOVEMBER,S.SUNDAY,1,2)},MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:{timezoneOffsetDuringDst:-7*60,timezoneOffsetNonDst:-8*60,dstStart:r=>H(r,$.MARCH,S.SUNDAY,2,2),dstEnd:r=>H(r,$.NOVEMBER,S.SUNDAY,1,2)},PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function H(r,e,t,n,i=0){let s=0,a=0;for(;a<n;)s++,new Date(r,e-1,s).getDay()===t&&a++;return new Date(r,e-1,s,i)}function Ht(r,e,t,n=0){let i=t===0?7:t,s=new Date(r,e-1+1,1,12),a=s.getDay()===0?7:s.getDay(),o;return a===i?o=7:a<i?o=7+a-i:o=a-i,s.setDate(s.getDate()-o),new Date(r,e-1,s.getDate(),n)}function Je(r,e,t={}){if(r==null)return null;if(typeof r=="number")return r;let n=t[r]??gi[r];return n==null?null:typeof n=="number"?n:e==null?null:(0,wt.default)(e).isAfter(n.dstStart(e.getFullYear()))&&!(0,wt.default)(e).isAfter(n.dstEnd(e.getFullYear()))?n.timezoneOffsetDuringDst:n.timezoneOffsetNonDst}ge.default.extend(jt.default);var j=class{constructor(e){e=e??new Date,e instanceof Date?this.instant=e:(this.instant=e.instant??new Date,this.timezoneOffset=Je(e.timezone,this.instant))}getDateWithAdjustedTimezone(){return new Date(this.instant.getTime()+this.getSystemTimezoneAdjustmentMinute(this.instant)*6e4)}getSystemTimezoneAdjustmentMinute(e,t){(!e||e.getTime()<0)&&(e=new Date);let n=-e.getTimezoneOffset(),i=t??this.timezoneOffset??n;return n-i}},x=class r{constructor(e,t){if(this._tags=new Set,this.reference=e,this.knownValues={},this.impliedValues={},t)for(let i in t)this.knownValues[i]=t[i];let n=(0,ge.default)(e.instant);this.imply("day",n.date()),this.imply("month",n.month()+1),this.imply("year",n.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues?this:(this.impliedValues[e]=t,this)}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){let e=new r(this.reference);e.knownValues={},e.impliedValues={};for(let t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(let t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isDateWithUnknownYear(){return this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||this.get("hour")!=null&&e.getHours()!=this.get("hour")||this.get("minute")!=null&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {
            tags: ${JSON.stringify(Array.from(this._tags).sort())}, 
            knownValues: ${JSON.stringify(this.knownValues)}, 
            impliedValues: ${JSON.stringify(this.impliedValues)}}, 
            reference: ${JSON.stringify(this.reference)}]`}dayjs(){return(0,ge.default)(this.date())}date(){let e=this.dateWithoutTimezoneAdjustment(),t=this.reference.getSystemTimezoneAdjustmentMinute(e,this.get("timezoneOffset"));return new Date(e.getTime()+t*6e4)}addTag(e){return this._tags.add(e),this}addTags(e){for(let t of e)this._tags.add(t);return this}tags(){return new Set(this._tags)}dateWithoutTimezoneAdjustment(){let e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}static createRelativeFromReference(e,t){let n=(0,ge.default)(e.instant);for(let s in t)n=n.add(t[s],s);let i=new r(e);return t.hour||t.minute||t.second?(Xe(i,n),k(i,n),e.timezoneOffset!==null&&i.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(ie(i,n),e.timezoneOffset!==null&&i.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(i.assign("day",n.date()),i.assign("month",n.month()+1),i.assign("year",n.year())):(t.week&&i.imply("weekday",n.day()),i.imply("day",n.date()),t.month?(i.assign("month",n.month()+1),i.assign("year",n.year())):(i.imply("month",n.month()+1),t.year?i.assign("year",n.year()):i.imply("year",n.year())))),i}},F=class r{constructor(e,t,n,i,s){this.reference=e,this.refDate=e.instant,this.index=t,this.text=n,this.start=i||new x(e),this.end=s}clone(){let e=new r(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}tags(){let e=new Set(this.start.tags());if(this.end)for(let t of this.end.tags())e.add(t);return e}toString(){let e=Array.from(this.tags()).sort();return`[ParsingResult {index: ${this.index}, text: '${this.text}', tags: ${JSON.stringify(e)} ...}]`}};function At(r,e,t="\\s{0,5},?\\s{0,5}"){let n=e.replace(/\((?!\?)/g,"(?:");return`${r}${n}(?:${t}${n}){0,10}`}function yi(r){let e;return r instanceof Array?e=[...r]:r instanceof Map?e=Array.from(r.keys()):e=Object.keys(r),e}function D(r){return`(?:${yi(r).sort((t,n)=>n.length-t.length).join("|").replace(/\./g,"\\.")})`}var zt=G(L());function et(r){return r<100&&(r>50?r=r+1900:r=r+2e3),r}function z(r,e,t){let n=(0,zt.default)(r),i=n;i=i.month(t-1),i=i.date(e),i=i.year(n.year());let s=i.add(1,"y"),a=i.add(-1,"y");return Math.abs(s.diff(n))<Math.abs(i.diff(n))?i=s:Math.abs(a.diff(n))<Math.abs(i.diff(n))&&(i=a),i.year()}var St={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6},Rt={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12},v={...Rt,jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12},Et={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12},Mt={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31},Kt={second:"second",seconds:"second",minute:"minute",minutes:"minute",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",quarter:"quarter",quarters:"quarter",year:"year",years:"year"},ye={s:"second",sec:"second",second:"second",seconds:"second",m:"minute",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",d:"d",day:"d",days:"d",w:"w",week:"week",weeks:"week",mo:"month",mon:"month",mos:"month",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year",...Kt},qt=`(?:${D(Et)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|the|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function Ti(r){let e=r.toLowerCase();return Et[e]!==void 0?Et[e]:e==="a"||e==="an"||e=="the"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}var se=`(?:${D(Mt)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function oe(r){let e=r.toLowerCase();return Mt[e]!==void 0?Mt[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}var ae="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9]|2[0-5])";function ue(r){if(/BE/i.test(r))return r=r.replace(/BE/i,""),parseInt(r)-543;if(/BCE?/i.test(r))return r=r.replace(/BCE?/i,""),-parseInt(r);if(/(AD|CE)/i.test(r))return r=r.replace(/(AD|CE)/i,""),parseInt(r);let e=parseInt(r);return et(e)}var Zt=`(${qt})\\s{0,3}(${D(ye)})`,Vt=new RegExp(Zt,"i"),xi=`(${qt})\\s{0,3}(${D(Kt)})`,Qt="\\s{0,5},?(?:\\s*and)?\\s{0,5}",Y=At("(?:(?:about|around)\\s{0,3})?",Zt,Qt),V=At("(?:(?:about|around)\\s{0,3})?",xi,Qt);function _(r){let e={},t=r,n=Vt.exec(t);for(;n;)Pi(e,n),t=t.substring(n[0].length).trim(),n=Vt.exec(t);return e}function Pi(r,e){let t=Ti(e[1]),n=ye[e[2].toLowerCase()];r[n]=t}var P=class{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}innerPatternHasChange(e,t){return this.innerPattern(e)!==t}patternLeftBoundary(){return"(\\W|^)"}pattern(e){return this.cachedInnerPattern&&!this.innerPatternHasChange(e,this.cachedInnerPattern)?this.cachedPattern:(this.cachedInnerPattern=this.innerPattern(e),this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${this.cachedInnerPattern.source}`,this.cachedInnerPattern.flags),this.cachedPattern)}extract(e,t){let n=t[1]??"";t.index=t.index+n.length,t[0]=t[0].substring(n.length);for(let i=2;i<t.length;i++)t[i-1]=t[i];return this.innerExtract(e,t)}};var wi=new RegExp(`(?:(?:within|in|for)\\s*)?(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Y})(?=\\W|$)`,"i"),Ai=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Y})(?=\\W|$)`,"i"),Ei=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${V})(?=\\W|$)`,"i"),Te=class extends P{constructor(e){super(),this.strictMode=e}innerPattern(e){return this.strictMode?Ei:e.option.forwardDate?wi:Ai}innerExtract(e,t){if(t[0].match(/^for\s*the\s*\w+/))return null;let n=_(t[1]);return x.createRelativeFromReference(e.reference,n)}};var Mi=new RegExp(`(?:on\\s{0,3})?(${se})(?:\\s{0,3}(?:to|\\-|\\\u2013|until|through|till)?\\s{0,3}(${se}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${D(v)})(?:(?:-|/|,?\\s{0,3})(${ae}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Xt=1,Jt=2,Si=3,er=4,xe=class extends P{innerPattern(){return Mi}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=v[t[Si].toLowerCase()],s=oe(t[Xt]);if(s>31)return t.index=t.index+t[Xt].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[er]){let a=ue(t[er]);n.start.assign("year",a)}else{let a=z(e.refDate,s,i);n.start.imply("year",a)}if(t[Jt]){let a=oe(t[Jt]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};var Ri=new RegExp(`(${D(v)})(?:-|/|\\s*,?\\s*)(${se})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${se})\\s*)?(?:(?:-|/|\\s*,\\s*|\\s+)(${ae}))?(?=\\W|$)(?!\\:\\d)`,"i"),Oi=1,tr=2,Ot=3,Nt=4,Pe=class extends P{constructor(e){super(),this.shouldSkipYearLikeDate=e}innerPattern(){return Ri}innerExtract(e,t){let n=v[t[Oi].toLowerCase()],i=oe(t[tr]);if(i>31||this.shouldSkipYearLikeDate&&!t[Ot]&&!t[Nt]&&t[tr].match(/^2[0-5]$/))return null;let s=e.createParsingComponents({day:i,month:n}).addTag("parser/ENMonthNameMiddleEndianParser");if(t[Nt]){let c=ue(t[Nt]);s.assign("year",c)}else{let c=z(e.refDate,i,n);s.imply("year",c)}if(!t[Ot])return s;let a=oe(t[Ot]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};var Ni=new RegExp(`((?:in)\\s*)?(${D(v)})\\s*(?:[,-]?\\s*(${ae})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),Di=1,Ci=2,rr=3,we=class extends P{innerPattern(){return Ni}innerExtract(e,t){let n=t[Ci].toLowerCase();if(t[0].length<=3&&!Rt[n])return null;let i=e.createParsingResult(t.index+(t[Di]||"").length,t.index+t[0].length);i.start.imply("day",1),i.start.addTag("parser/ENMonthNameParser");let s=v[n];if(i.start.assign("month",s),t[rr]){let a=ue(t[rr]);i.start.assign("year",a)}else{let a=z(e.refDate,1,s);i.start.imply("year",a)}return i}};var bi=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${D(v)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),$i=1,Ui=2,nr=3,vi=4,Ae=class extends P{innerPattern(){return bi}innerExtract(e,t){let n=t[nr]?parseInt(t[nr]):v[t[Ui].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[$i]);return{day:parseInt(t[vi]),month:n,year:i}}};var _i=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),Ii=1,ki=2,Ee=class extends P{innerPattern(){return _i}innerExtract(e,t){let n=parseInt(t[ki]),i=parseInt(t[Ii]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};function Wi(r,e,t,n){return new RegExp(`${r}${e}(\\d{1,4})(?:(?:\\.|:|\uFF1A)(\\d{1,2})(?:(?::|\uFF1A)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,n)}function Fi(r,e){return new RegExp(`^(${r})(\\d{1,4})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,"i")}var ir=2,ce=3,tt=4,rt=5,Me=6,nt=class{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?!/)(?=\\W|$)"}followingSuffix(){return"(?!/)(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){let n=this.extractPrimaryTimeComponents(e,t);if(!n)return t.index+=t[0].length,null;let i=t.index+t[1].length,s=t[0].substring(t[1].length),a=e.createParsingResult(i,s,n);t.index+=t[0].length;let o=e.text.substring(t.index),y=this.getFollowingTimePatternThroughCache().exec(o);return s.match(/^\d{3,4}/)&&y&&y[0].match(/^\s*([+-])\s*\d{2,4}$/)?null:!y||y[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,y,a),a.end&&(a.text+=y[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,t,n=!1){let i=e.createParsingComponents(),s=0,a=null,o=parseInt(t[ir]);if(o>100){if(this.strictMode||t[ce]!=null)return null;s=o%100,o=Math.floor(o/100)}if(o>24)return null;if(t[ce]!=null){if(t[ce].length==1&&!t[Me])return null;s=parseInt(t[ce])}if(s>=60)return null;if(o>12&&(a=T.PM),t[Me]!=null){if(o>12)return null;let c=t[Me][0].toLowerCase();c=="a"&&(a=T.AM,o==12&&(o=0)),c=="p"&&(a=T.PM,o!=12&&(o+=12))}if(i.assign("hour",o),i.assign("minute",s),a!==null?i.assign("meridiem",a):o<12?i.imply("meridiem",T.AM):i.imply("meridiem",T.PM),t[rt]!=null){let c=parseInt(t[rt].substring(0,3));if(c>=1e3)return null;i.assign("millisecond",c)}if(t[tt]!=null){let c=parseInt(t[tt]);if(c>=60)return null;i.assign("second",c)}return i}extractFollowingTimeComponents(e,t,n){let i=e.createParsingComponents();if(t[rt]!=null){let c=parseInt(t[rt].substring(0,3));if(c>=1e3)return null;i.assign("millisecond",c)}if(t[tt]!=null){let c=parseInt(t[tt]);if(c>=60)return null;i.assign("second",c)}let s=parseInt(t[ir]),a=0,o=-1;if(t[ce]!=null?a=parseInt(t[ce]):s>100&&(a=s%100,s=Math.floor(s/100)),a>=60||s>24)return null;if(s>=12&&(o=T.PM),t[Me]!=null){if(s>12)return null;let c=t[Me][0].toLowerCase();c=="a"&&(o=T.AM,s==12&&(s=0,i.isCertain("day")||i.imply("day",i.get("day")+1))),c=="p"&&(o=T.PM,s!=12&&(s+=12)),n.start.isCertain("meridiem")||(o==T.AM?(n.start.imply("meridiem",T.AM),n.start.get("hour")==12&&n.start.assign("hour",0)):(n.start.imply("meridiem",T.PM),n.start.get("hour")!=12&&n.start.assign("hour",n.start.get("hour")+12)))}return i.assign("hour",s),i.assign("minute",a),o>=0?i.assign("meridiem",o):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>s?i.imply("meridiem",T.AM):s<=12&&(i.assign("hour",s+12),i.assign("meridiem",T.PM)):s>12?i.imply("meridiem",T.PM):s<=12&&i.imply("meridiem",T.AM),i.date().getTime()<n.start.date().getTime()&&i.imply("day",i.get("day")+1),i}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){let n=t[1];if(this.strictMode||n.includes(".")&&!n.match(/\d(\.\d{2})+$/)||parseInt(n)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;let n=t[1],i=t[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;let s=parseInt(i),a=parseInt(n);if(s>24||a>24)return null}return e}getPrimaryTimePatternThroughCache(){let e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=Wi(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){let e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=Fi(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t,this.cachedFollowingTimePatten)}};var Se=class extends nt{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|to|until|through|till|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(!n)return n;if(t[0].endsWith("night")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",T.PM)):i<6&&n.assign("meridiem",T.AM)}if(t[0].endsWith("afternoon")){n.assign("meridiem",T.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}return t[0].endsWith("morning")&&(n.assign("meridiem",T.AM),n.get("hour")<12&&n.assign("hour",n.get("hour"))),n.addTag("parser/ENTimeExpressionParser")}};function K(r){let e={};for(let t in r)e[t]=-r[t];return e}function sr(r,e){let t=r.clone(),n=r.dayjs();for(let i in e)n=n.add(e[i],i);return("day"in e||"d"in e||"week"in e||"month"in e||"year"in e)&&(t.imply("day",n.date()),t.imply("month",n.month()+1),t.imply("year",n.year())),("second"in e||"minute"in e||"hour"in e)&&(t.imply("second",n.second()),t.imply("minute",n.minute()),t.imply("hour",n.hour())),t}var Yi=new RegExp(`(${Y})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i"),Bi=new RegExp(`(${V})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i"),Re=class extends P{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Bi:Yi}innerExtract(e,t){let n=_(t[1]),i=K(n);return x.createRelativeFromReference(e.reference,i)}};var Gi=new RegExp(`(${Y})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),Li=new RegExp(`(${V})\\s{0,5}(later|after|from now)(?=\\W|$)`,"i"),Hi=1,Oe=class extends P{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Li:Gi}innerExtract(e,t){let n=_(t[Hi]);return x.createRelativeFromReference(e.reference,n)}};var it=class{refine(e,t){return t.filter(n=>this.isValid(e,n))}},I=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0],s=null;for(let a=1;a<t.length;a++){s=t[a];let o=e.text.substring(i.index+i.text.length,s.index);if(!this.shouldMergeResults(o,i,s,e))n.push(i),i=s;else{let c=i,y=s,E=this.mergeResults(o,c,y,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${c} and ${y} into ${E}`)}),i=E}}return i!=null&&n.push(i),n}};var Ne=class extends I{shouldMergeResults(e,t,n){return!t.end&&!n.end&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){if(!t.start.isOnlyWeekdayComponent()&&!n.start.isOnlyWeekdayComponent()&&(n.start.getCertainComponents().forEach(s=>{t.start.isCertain(s)||t.start.imply(s,n.start.get(s))}),t.start.getCertainComponents().forEach(s=>{n.start.isCertain(s)||n.start.imply(s,t.start.get(s))})),t.start.date().getTime()>n.start.date().getTime()){let s=t.start.dayjs(),a=n.start.dayjs();n.start.isOnlyWeekdayComponent()&&a.add(7,"days").isAfter(s)?(a=a.add(7,"days"),n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())):t.start.isOnlyWeekdayComponent()&&s.add(-7,"days").isBefore(a)?(s=s.add(-7,"days"),t.start.imply("day",s.date()),t.start.imply("month",s.month()+1),t.start.imply("year",s.year())):n.start.isDateWithUnknownYear()&&a.add(1,"years").isAfter(s)?(a=a.add(1,"years"),n.start.imply("year",a.year())):t.start.isDateWithUnknownYear()&&s.add(-1,"years").isBefore(a)?(s=s.add(-1,"years"),t.start.imply("year",s.year())):[n,t]=[t,n]}let i=t.clone();return i.start=t.start,i.end=n.start,i.index=Math.min(t.index,n.index),t.index<n.index?i.text=t.text+e+n.text:i.text=n.text+e+t.text,i}};var De=class extends Ne{patternBetween(){return/^\s*(to|-|–|until|through|till)\s*$/i}};function Dt(r,e){let t=r.clone(),n=r.start,i=e.start;if(t.start=or(n,i),r.end!=null||e.end!=null){let s=r.end==null?r.start:r.end,a=e.end==null?e.start:e.end,o=or(s,a);if(r.end==null&&o.date().getTime()<t.start.date().getTime()){let c=o.dayjs().add(1,"day");o.isCertain("day")?k(o,c):J(o,c)}t.end=o}return t}function or(r,e){let t=r.clone();return e.isCertain("hour")?(t.assign("hour",e.get("hour")),t.assign("minute",e.get("minute")),e.isCertain("second")?(t.assign("second",e.get("second")),e.isCertain("millisecond")?t.assign("millisecond",e.get("millisecond")):t.imply("millisecond",e.get("millisecond"))):(t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond")))):(t.imply("hour",e.get("hour")),t.imply("minute",e.get("minute")),t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond"))),e.isCertain("timezoneOffset")&&t.assign("timezoneOffset",e.get("timezoneOffset")),e.isCertain("meridiem")?t.assign("meridiem",e.get("meridiem")):e.get("meridiem")!=null&&t.get("meridiem")==null&&t.imply("meridiem",e.get("meridiem")),t.get("meridiem")==T.PM&&t.get("hour")<12&&(e.isCertain("hour")?t.assign("hour",t.get("hour")+12):t.imply("hour",t.get("hour")+12)),t.addTags(r.tags()),t.addTags(e.tags()),t}var Ce=class extends I{shouldMergeResults(e,t,n){return(t.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&t.start.isOnlyTime())&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){let i=t.start.isOnlyDate()?Dt(t,n):Dt(n,t);return i.index=t.index,i.text=t.text+e+n.text,i}};var fe=class extends Ce{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$")}};var ji=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),be=class{constructor(e){this.timezoneOverrides=e}refine(e,t){let n=e.option.timezones??{};return t.forEach(i=>{let s=e.text.substring(i.index+i.text.length),a=ji.exec(s);if(!a)return;let o=a[1].toUpperCase(),c=i.start.date()??i.refDate??new Date,y={...this.timezoneOverrides,...n},E=Je(o,c,y);if(E==null)return;e.debug(()=>{console.log(`Extracting timezone: '${o}' into: ${E} for: ${i.start}`)});let N=i.start.get("timezoneOffset");N!==null&&E!=N&&(i.start.isCertain("timezoneOffset")||o!=a[1])||i.start.isOnlyDate()&&o!=a[1]||(i.text+=a[0],i.start.isCertain("timezoneOffset")||i.start.assign("timezoneOffset",E),i.end!=null&&!i.end.isCertain("timezoneOffset")&&i.end.assign("timezoneOffset",E))}),t}};var zi=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),Vi=1,Ki=2,qi=3,$e=class{refine(e,t){return t.forEach(function(n){if(n.start.isCertain("timezoneOffset"))return;let i=e.text.substring(n.index+n.text.length),s=zi.exec(i);if(!s)return;e.debug(()=>{console.log(`Extracting timezone: '${s[0]}' into : ${n}`)});let a=parseInt(s[Ki]),o=parseInt(s[qi]||"0"),c=a*60+o;c>14*60||(s[Vi]==="-"&&(c=-c),n.end!=null&&n.end.assign("timezoneOffset",c),n.start.assign("timezoneOffset",c),n.text+=s[0])}),t}};var q=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0];for(let s=1;s<t.length;s++){let a=t[s];if(a.index>=i.index+i.text.length){n.push(i),i=a;continue}let o=null,c=null;a.text.length>i.text.length?(o=a,c=i):(o=i,c=a),e.debug(()=>{console.log(`${this.constructor.name} remove ${c} by ${o}`)}),i=o}return i!=null&&n.push(i),n}};var ar=G(L());var Ue=class{refine(e,t){return e.option.forwardDate&&t.forEach(function(n){let i=(0,ar.default)(e.refDate);if(n.start.isOnlyTime()&&i.isAfter(n.start.dayjs())&&(i=i.add(1,"day"),J(n.start,i),n.end&&n.end.isOnlyTime()&&(J(n.end,i),n.start.dayjs().isAfter(n.end.dayjs())&&(i=i.add(1,"day"),J(n.end,i)))),n.start.isOnlyWeekdayComponent()&&i.isAfter(n.start.dayjs())&&(i.day()>=n.start.get("weekday")?i=i.day(n.start.get("weekday")+7):i=i.day(n.start.get("weekday")),n.start.imply("day",i.date()),n.start.imply("month",i.month()+1),n.start.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.start})`)}),n.end&&n.end.isOnlyWeekdayComponent()&&(i.day()>n.end.get("weekday")?i=i.day(n.end.get("weekday")+7):i=i.day(n.end.get("weekday")),n.end.imply("day",i.date()),n.end.imply("month",i.month()+1),n.end.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.end})`)}))),n.start.isDateWithUnknownYear()&&i.isAfter(n.start.dayjs()))for(let s=0;s<3&&i.isAfter(n.start.dayjs());s++)n.start.imply("year",n.start.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.start})`)}),n.end&&!n.end.isCertain("year")&&(n.end.imply("year",n.end.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.end})`)}))}),t}};var ve=class extends it{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${t.text}'`)}),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.end})`)}),!1):this.strictMode?this.isStrictModeValid(e,t):!0:(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.start})`)}),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)}),!1):t.start.isOnlyTime()&&(!t.start.isCertain("hour")||!t.start.isCertain("minute"))?(e.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)}),!1):!0}};var Zi=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),Qi=1,Xi=2,Ji=3,ur=4,es=5,cr=6,fr=7,dr=8,lr=9,_e=class extends P{innerPattern(){return Zi}innerExtract(e,t){let n={};if(n.year=parseInt(t[Qi]),n.month=parseInt(t[Xi]),n.day=parseInt(t[Ji]),t[ur]!=null)if(n.hour=parseInt(t[ur]),n.minute=parseInt(t[es]),t[cr]!=null&&(n.second=parseInt(t[cr])),t[fr]!=null&&(n.millisecond=parseInt(t[fr])),t[dr]==null)n.timezoneOffset=0;else{let i=parseInt(t[dr]),s=0;t[lr]!=null&&(s=parseInt(t[lr]));let a=i*60;a<0?a-=s:a+=s,n.timezoneOffset=a}return n}};var Ie=class extends I{mergeResults(e,t,n){let i=n.clone();return i.index=t.index,i.text=t.text+e+i.text,i.start.assign("weekday",t.start.get("weekday")),i.end&&i.end.assign("weekday",t.start.get("weekday")),i}shouldMergeResults(e,t,n){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&n.start.isCertain("day")&&e.match(/^,?\s*$/)!=null}};function mr(r,e=!1){return r.parsers.unshift(new _e),r.refiners.unshift(new Ie),r.refiners.unshift(new $e),r.refiners.unshift(new q),r.refiners.push(new be),r.refiners.push(new q),r.refiners.push(new Ue),r.refiners.push(new ve(e)),r}var Rr=G(L());var de=G(L());function pr(r){let e=(0,de.default)(r.instant),t=new x(r,{});return k(t,e),Xe(t,e),r.timezoneOffset!==null&&t.assign("timezoneOffset",e.utcOffset()),t.addTag("casualReference/now"),t}function hr(r){let e=(0,de.default)(r.instant),t=new x(r,{});return k(t,e),ie(t,e),t.addTag("casualReference/today"),t}function gr(r){return ts(r,1).addTag("casualReference/yesterday")}function ts(r,e){return Tr(r,-e)}function yr(r){return Tr(r,1).addTag("casualReference/tomorrow")}function Tr(r,e){let t=(0,de.default)(r.instant),n=new x(r,{});return t=t.add(e,"day"),k(n,t),ie(n,t),n}function xr(r,e=22){let t=(0,de.default)(r.instant),n=new x(r,{});return k(n,t),n.imply("hour",e),n.imply("meridiem",T.PM),n.addTag("casualReference/tonight"),n}function Pr(r,e=20){let t=new x(r,{});return t.imply("meridiem",T.PM),t.imply("hour",e),t.addTag("casualReference/evening"),t}function wr(r){let e=new x(r,{}),t=(0,de.default)(r.instant);return t.hour()>2&&Lt(e,t),e.assign("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("millisecond",0),e.addTag("casualReference/midnight"),e}function Ar(r,e=6){let t=new x(r,{});return t.imply("meridiem",T.AM),t.imply("hour",e),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t.addTag("casualReference/morning"),t}function Er(r,e=15){let t=new x(r,{});return t.imply("meridiem",T.PM),t.imply("hour",e),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t.addTag("casualReference/afternoon"),t}function Mr(r){let e=new x(r,{});return e.imply("meridiem",T.AM),e.imply("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("millisecond",0),e.addTag("casualReference/noon"),e}var rs=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i,ke=class extends P{innerPattern(e){return rs}innerExtract(e,t){let n=(0,Rr.default)(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"now":s=pr(e.reference);break;case"today":s=hr(e.reference);break;case"yesterday":s=gr(e.reference);break;case"tomorrow":case"tmr":case"tmrw":s=yr(e.reference);break;case"tonight":s=xr(e.reference);break;default:i.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),k(s,n),s.imply("hour",0));break}return s.addTag("parser/ENCasualDateParser"),s}};var ns=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|midday|noon)(?=\W|$)/i,We=class extends P{innerPattern(){return ns}innerExtract(e,t){let n=null;switch(t[1].toLowerCase()){case"afternoon":n=Er(e.reference);break;case"evening":case"night":n=Pr(e.reference);break;case"midnight":n=wr(e.reference);break;case"morning":n=Ar(e.reference);break;case"noon":case"midday":n=Mr(e.reference);break}return n&&n.addTag("parser/ENCasualTimeParser"),n}};function Or(r,e,t){let n=r.getDateWithAdjustedTimezone(),i=is(n,e,t),s=new x(r);return s=sr(s,{day:i}),s.assign("weekday",e),s}function is(r,e,t){let n=r.getDay();switch(t){case"this":return st(r,e);case"last":return Nr(r,e);case"next":return n==S.SUNDAY?e==S.SUNDAY?7:e:n==S.SATURDAY?e==S.SATURDAY?7:e==S.SUNDAY?8:1+e:e<n&&e!=S.SUNDAY?st(r,e):st(r,e)+7}return ss(r,e)}function ss(r,e){let t=Nr(r,e),n=st(r,e);return n<-t?n:t}function st(r,e){let t=r.getDay(),n=e-t;return n<0&&(n+=7),n}function Nr(r,e){let t=r.getDay(),n=e-t;return n>=0&&(n-=7),n}var os=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${D(St)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),as=1,us=2,cs=3,Fe=class extends P{innerPattern(){return os}innerExtract(e,t){let n=t[us].toLowerCase(),i=St[n],s=t[as],a=t[cs],o=s||a;o=o||"",o=o.toLowerCase();let c=null;return o=="last"||o=="past"?c="last":o=="next"?c="next":o=="this"&&(c="this"),Or(e.reference,i,c)}};var Dr=G(L());var fs=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${D(ye)})(?=\\s*)(?=\\W|$)`,"i"),ds=1,ls=2,Ye=class extends P{innerPattern(){return fs}innerExtract(e,t){let n=t[ds].toLowerCase(),i=t[ls].toLowerCase(),s=ye[i];if(n=="next"||n.startsWith("after")){let c={};return c[s]=1,x.createRelativeFromReference(e.reference,c)}if(n=="last"||n=="past"){let c={};return c[s]=-1,x.createRelativeFromReference(e.reference,c)}let a=e.createParsingComponents(),o=(0,Dr.default)(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};var ms=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),ot=1,ps=5,Cr=2,br=3,Ct=4,Be=class{constructor(e){this.groupNumberMonth=e?br:Cr,this.groupNumberDay=e?Cr:br}pattern(){return ms}extract(e,t){if(t[ot].length==0&&t.index>0&&t.index<e.text.length){let c=e.text[t.index-1];if(c>="0"&&c<="9")return}let n=t.index+t[ot].length,i=t[0].substr(t[ot].length,t[0].length-t[ot].length-t[ps].length);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!t[Ct]&&t[0].indexOf("/")<0)return;let s=e.createParsingResult(n,i),a=parseInt(t[this.groupNumberMonth]),o=parseInt(t[this.groupNumberDay]);if((a<1||a>12)&&a>12)if(o>=1&&o<=12&&a<=31)[o,a]=[a,o];else return null;if(o<1||o>31)return null;if(s.start.assign("day",o),s.start.assign("month",a),t[Ct]){let c=parseInt(t[Ct]),y=et(c);s.start.assign("year",y)}else{let c=z(e.refDate,o,a);s.start.imply("year",c)}return s}};var hs=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${Y})(?=\\W|$)`,"i"),gs=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${V})(?=\\W|$)`,"i"),Ge=class extends P{constructor(e=!0){super(),this.allowAbbreviations=e}innerPattern(){return this.allowAbbreviations?hs:gs}innerExtract(e,t){let n=t[1].toLowerCase(),i=_(t[2]);switch(n){case"last":case"past":case"-":i=K(i);break}return x.createRelativeFromReference(e.reference,i)}};function ys(r){return r.text.match(/^[+-]/i)!=null}function $r(r){return r.text.match(/^-/i)!=null}var Le=class extends I{shouldMergeResults(e,t,n){return e.match(/^\s*$/i)?ys(n)||$r(n):!1}mergeResults(e,t,n,i){let s=_(n.text);$r(n)&&(s=K(s));let a=x.createRelativeFromReference(new j(t.start.date()),s);return new F(t.reference,t.index,`${t.text}${e}${n.text}`,a)}};function Ur(r){return r.text.match(/\s+(before|from)$/i)!=null}function Ts(r){return r.text.match(/\s+(after|since)$/i)!=null}var He=class extends I{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,n){return!e.match(this.patternBetween())||!Ur(t)&&!Ts(t)?!1:!!n.start.get("day")&&!!n.start.get("month")&&!!n.start.get("year")}mergeResults(e,t,n){let i=_(t.text);Ur(t)&&(i=K(i));let s=x.createRelativeFromReference(new j(n.start.date()),i);return new F(n.reference,t.index,`${t.text}${e}${n.text}`,s)}};var ee=class{createCasualConfiguration(e=!1){let t=this.createConfiguration(!1,e);return t.parsers.push(new ke),t.parsers.push(new We),t.parsers.push(new we),t.parsers.push(new Ye),t.parsers.push(new Ge),t}createConfiguration(e=!0,t=!1){let n=mr({parsers:[new Be(t),new Te(e),new xe,new Pe(t),new Fe,new Ae,new Ee,new Se(e),new Re(e),new Oe(e)],refiners:[new fe]},e);return n.refiners.unshift(new He),n.refiners.unshift(new Le),n.refiners.unshift(new q),n.refiners.push(new fe),n.refiners.push(new De),n}};var le=class r{constructor(e){this.defaultConfig=new ee,e=e||this.defaultConfig.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new r({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,n){let i=this.parse(e,t,n);return i.length>0?i[0].start.date():null}parse(e,t,n){let i=new bt(e,t,n),s=[];return this.parsers.forEach(a=>{let o=r.executeParser(i,a);s=s.concat(o)}),s.sort((a,o)=>a.index-o.index),this.refiners.forEach(function(a){s=a.refine(i,s)}),s}static executeParser(e,t){let n=[],i=t.pattern(e),s=e.text,a=e.text,o=i.exec(a);for(;o;){let c=o.index+s.length-a.length;o.index=c;let y=t.extract(e,o);if(!y){a=s.substring(o.index+1),o=i.exec(a);continue}let E=null;y instanceof F?E=y:y instanceof x?(E=e.createParsingResult(o.index,o[0]),E.start=y):E=e.createParsingResult(o.index,o[0],y);let N=E.index,W=E.text;e.debug(()=>console.log(`${t.constructor.name} extracted (at index=${N}) '${W}'`)),n.push(E),a=s.substring(N+W.length),o=i.exec(a)}return n}},bt=class{constructor(e,t,n){this.text=e,this.reference=new j(t),this.option=n??{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof x?e:new x(this.reference,e)}createParsingResult(e,t,n,i){let s=typeof t=="string"?t:this.text.substring(e,t),a=n?this.createParsingComponents(n):null,o=i?this.createParsingComponents(i):null;return new F(this.reference,e,s,a,o)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}};var $t=new ee,vr=new le($t.createCasualConfiguration(!1)),xs=new le($t.createConfiguration(!0,!1)),Qu=new le($t.createCasualConfiguration(!0));var ws=vr;function _r(r,e,t){return ws.parseDate(r,e,t)}async function Ir(){let e=(await Yt({nldates:{}})).nldates;Object.keys(e).length==0&&(await syscall("editor.flashNotification","Change prefix in SETTINGS"),await Bt({nldates:{dailyPrefix:""}}),e.dailyPrefix="");let t=e.dailyPrefix,n=await syscall("editor.prompt","what is the date?"),i=_r(n),s=new Date(i).toISOString().split("T")[0],a="[["+t+s+"]]";await syscall("editor.insertAtCursor",a)}var kr={parseDate:Ir},Wr={name:"nldates",functions:{parseDate:{path:"nldates.ts:parseDate",command:{name:"parse date"}}},assets:{}},rc={manifest:Wr,functionMapping:kr};kt(kr,Wr);export{rc as plug};
